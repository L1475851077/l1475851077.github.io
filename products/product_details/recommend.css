
/* products/recommend.css */
/* 推荐商品轮播组件 - 独立样式，以及新的主布局样式 */

/* --- 新增：主容器布局 (桌面端左右分栏) --- */
.product-detail .container {
    display: grid;
    grid-template-columns: 1fr 1fr; /* 左右两列，各占 50% */
    gap: 50px; /* 列间距 */
    /* align-items: start; /1* 可选：对齐方式 *1/ */
}

/* --- 新增：左边布局容器 (桌面端上下分栏) --- */
.left-layout {
    display: grid;
    grid-template-rows: 1fr auto; /* 上半部分（图片）占剩余空间，下半部分（推荐）自适应高度 */
    gap: 20px; /* 行间距 */
    /* 确保它占据 grid 的一列 */
    /* grid-column: 1; /1* 可选，如果需要明确指定 *1/ */
}

/* --- 调整原组件样式以适应新布局 --- */
.product-images {
    /* 移除可能的 flex 或其他影响布局的样式 */
    /* width: 100%; /1* Grid 会处理宽度 *1/ */
    /* height: auto; /1* 让图片决定容器高度或使用 1fr *1/ */
    /* overflow: hidden; /1* 可选 *1/ */
    grid-row: 1; /* 放在左边布局的第一行 */
}

.product-images img {
    width: 100%; /* 图片占满容器 */
    height: auto; /* 保持宽高比 */
    display: block; /* 去除图片底部空隙 */
    object-fit: contain; /* 完整显示图片 */
}

.related-products {
    grid-row: 2; /* 放在左边布局的第二行 */
    margin-top: 0; /* 移除之前的 margin-top */
    width: 100%; /* 确保占满其网格单元格 */
    overflow-x: hidden;
    /* padding: 0 10px; /1* 可选：移动端边距 *1/ */
}

.related-products h3 {
    margin: 0 0 16px;
    font-size: 1.3em;
    color: #333;
    font-weight: 600;
}

.product-info {
    /* grid-column: 2; /1* 可选，明确指定在右边列 *1/ */
    /* width: 100%; /1* Grid 会处理宽度 *1/ */
    /* align-self: start; /1* 可选：对齐方式 *1/ */
}

/* 轮播容器：限制宽度，允许内部滚动 */
.related-carousel {
    position: relative;
    display: flex;
    align-items: center;
    width: 100%;
    max-width: 100%;
    overflow: hidden;
}

/* 滚动轨道 */
.carousel-track {
    display: flex;
    justify-content: center; /* 水平居中卡片 */
    align-items: flex-start; /* 垂直对齐到顶部 */
    gap: 12px; /* 保持卡片间距 */
    width: 100%; /* 占满父容器 */
    min-width: 0; /* 防止 flex 子项撑开容器 */
    padding: 8px 0; /* 可选：内部间距 */
}

.carousel-track::-webkit-scrollbar {
    display: none; /* Chrome/Safari */
}

/* === 推荐商品卡片 - 固定尺寸，防割裂，链接优化 === */
.recommend-card {
  flex: 0 0 auto;
  width: 150px;
  height: 280px; /* 固定高度 */
  padding: 15px;
  background: #fff;
  border: 1px solid #eee;
  border-radius: 6px;
  display: flex; /* 保持 flex */
  flex-direction: column; /* 保持 column */
  opacity: 1;
  transition:
    transform 0.2s ease,
    box-shadow 0.2s ease,
    border-color 0.2s ease;
  box-sizing: border-box; /* 确保 padding 包含在 height 内 */
  position: relative; /* 为 a 标签的绝对定位提供参考 */
  cursor: pointer; /* 确保整个卡片有手型光标 */
}

/* --- 修改：为卡片内的 <a> 标签设置样式 --- */
.recommend-card a {
  display: flex; /* 使用 flex 布局 */
  flex-direction: column; /* 内容垂直排列 */
  width: 100%; /* 占满父容器宽度 */
  height: 100%; /* 占满父容器高度 */
  text-decoration: none; /* 移除下划线 */
  color: inherit; /* 继承父元素颜色 */
  /* display: contents; /1* 确保已在 HTML 中移除 *1/ */
  position: absolute; /* 绝对定位，填充整个卡片 */
  top: 0;
  left: 0;
  z-index: 1; /* 确保 a 标签在内容之上 */
}

/* 让 a 标签内部的 *直接* 子元素（img, h3, p）不拦截点击事件 */
.recommend-card a > * {
  pointer-events: none; /* 阻止子元素响应鼠标事件 */
}

/* 确保图片不拦截点击事件 */
.recommend-card a img {
  pointer-events: none; /* 关键：确保图片不拦截点击 */
  /* ... 保留之前的图片样式 ... */
  position: relative; /* 确保它在 a 标签之内 */
  z-index: 2; /* 确保图片显示在 a 标签之上，但点击事件穿透 */
}

/* 确保卡片内容在 a 标签之上，但允许点击穿透 */
.recommend-card h3,
.recommend-card p {
  position: relative; /* 确保它们在 a 标签之内 */
  z-index: 2; /* 确保文本可见 */
  /* pointer-events: auto; /1* 如果需要文字可选中，可以设为 auto，但点击仍会穿透到 a *1/ */
  /* 或者保持 pointer-events: none; 如果不需要选中文字 *1/ */
  pointer-events: none; /* 让点击穿透文字 */
}

/* 图片区：固定高度，完整显示 */
.recommend-card img {
  width: 100%;
  height: 120px; /* 固定图片区域高度 */
  object-fit: contain; /* 完整显示，不裁剪 */
  object-position: center;
  display: block;
  margin-bottom: 8px;
  border-radius: 4px;
  background-color: #fff;
  user-select: none;
  /* pointer-events: none; /1* 由 recommend-card a img 处理 *1/ */
  position: relative; /* 确保它在 a 标签之内 */
  z-index: 2; /* 确保图片显示在 a 标签之上 */
}

/* 标题：固定 2 行 */
.recommend-card h3 {
  margin: 0 0 8px;
  font-size: 0.95em;
  line-height: 1.3;
  color: #333;
  font-weight: 500;
  overflow: hidden;
  text-overflow: ellipsis;
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  height: 2.6em; /* 2 行高度 */
   padding-left: 5px;
}

/* 描述：固定 2 行 */
.recommend-card p {
  margin: 0;
  font-size: 0.8em;
  color: #666;
  line-height: 1.4;
  overflow: hidden;
  text-overflow: ellipsis;
  display: -webkit-box;
  -webkit-line-clamp: 4;
  -webkit-box-orient: vertical;
  /* height: 3.8em; 2 行高度 */
   flex: 1 1 auto; 
   padding-left: 5px;
}

/* 悬停效果（仅桌面） */
@media (hover: hover) and (pointer: fine) {
  .recommend-card:hover a { /* 悬停在卡片上时，对 a 标签应用效果 */
    /* transform: translateY(-2px); /1* transform 不能直接应用在 a 上，因为它现在是绝对定位 *1/ */
    /* 需要应用到 .recommend-card 上 */
  }
  .recommend-card:hover { /* 对卡片本身应用悬停效果 */
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
    border-color: #ddd;
  }
}

/* 点击/触摸反馈 */
.recommend-card:active {
  transform: scale(0.96);
  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
  border-color: #ccc;
}

/* 无障碍支持 */
.recommend-card:focus-within { /* 当卡片内任意元素获得焦点时 */
  outline: 2px solid #4dabf7;
  outline-offset: 2px;
}

/* === 轮播控制按钮 === */
.carousel-btn {
  background: rgba(0, 0, 0, 0.5);
  border: none;
  width: 32px;
  height: 32px;
  border-radius: 50%;
  font-size: 18px;
  color: white;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  margin: 0 4px;
  flex-shrink: 0; /* 不收缩 */
  transition: background 0.2s ease;
}

/* .carousel-btn:hover {
  background: #e0e0e0;
} */

.carousel-btn:active {
  background-color: #d0d0d0; /* 改为改变背景色 */
}

/* === 移动端适配：恢复为堆叠布局 === */
@media (max-width: 768px) {
  .product-detail .container {
    grid-template-columns: 1fr; /* 单列 */
    grid-template-rows: auto auto auto; /* 三行：图片、信息、推荐 */
    gap: 16px; /* 调整移动端间距 */
  }

  .left-layout {
    display: contents; /* 让 .product-images 和 .related-products 成为 .container 的直接子项 */
    /* grid-template-rows: unset; /1* 取消之前的 grid 设置 *1/ */
    /* gap: unset; */
  }

  .product-images {
    grid-row: 1; /* 在 .container 的第一行 */
    /* width: 100%; /1* 确保占满 *1/ */
  }

  .product-info {
    grid-row: 2; /* 在 .container 的第二行 */
  }

  .related-products {
    grid-row: 3; /* 在 .container 的第三行 */
    margin-top: 0; /* 确保没有多余间距 */
    /* padding: 0 10px; /1* 可选：移动端边距 *1/ */
  }

  /* 移动端卡片样式调整 */
  .recommend-card {
    width: 110px;
    height: 230px;
    padding: 8px;
  }

  .recommend-card img {
    height: 90px;
  }

  .recommend-card h3 {
    font-size: 0.85em;
    margin: 1;
    height: 2.4em;
  }

  .recommend-card p {
    font-size: 0.75em;
    flex: 1 1 auto; 
  }

  .carousel-btn {
    width: 28px;
    height: 28px;
    font-size: 16px;
    margin: 0 3px;
  }
}
/* --- 结束移动端适配 --- */
